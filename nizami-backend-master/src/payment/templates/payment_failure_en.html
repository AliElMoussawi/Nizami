<!-- emails/payment_failure.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Payment Failed - Nizami</title>
    <style>
        body {
            font-family: "Bahij TheSansArabic", Arial, sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(to bottom, #F1FFF4, #F8F5FF);
            color: #3A4558;
            min-height: 100vh;
        }

        .container {
            width: 100%;
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
            background-color: #ffffff;
            border-radius: 24px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            margin-top: 20px;
            margin-bottom: 20px;
        }

        .header {
            text-align: center;
            padding-bottom: 30px;
            border-bottom: 1px solid #C0E8D4;
            margin-bottom: 30px;
        }

        .logo {
            width: 120px;
            height: auto;
            margin-bottom: 20px;
        }

        .header h1 {
            color: #3A4558;
            font-size: 28px;
            font-weight: 600;
            margin: 0;
            font-family: "Bahij TheSansArabic", sans-serif;
        }

        .error-icon {
            width: 80px;
            height: 80px;
            background-color: #FFF1F1;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            border: 3px solid #F04438;
        }

        .error-icon svg {
            width: 40px;
            height: 40px;
            color: #F04438;
        }

        .content {
            font-size: 16px;
            line-height: 1.6;
            margin-bottom: 30px;
            color: #3A4558;
        }

        .content p {
            margin-bottom: 16px;
        }

        .payment-details {
            background-color: #FFF1F1;
            padding: 20px;
            border-radius: 12px;
            margin: 25px 0;
            border-left: 4px solid #F04438;
        }

        .payment-details h3 {
            margin-top: 0;
            color: #B32318;
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 15px;
        }

        .payment-details ul {
            margin: 0;
            padding-left: 0;
            list-style: none;
        }

        .payment-details li {
            margin-bottom: 10px;
            padding: 8px 0;
            border-bottom: 1px solid #ffdfdc;
        }

        .payment-details li:last-child {
            border-bottom: none;
        }

        .detail-label {
            font-weight: 600;
            color: #3A4558;
            display: inline-block;
            width: 140px;
        }

        .detail-value {
            color: #7C7C7C;
        }

        .highlight-box {
            background-color: #F4F4FF;
            padding: 20px;
            border-radius: 12px;
            margin: 25px 0;
            border: 1px solid #C0E8D4;
        }

        .highlight-box p {
            margin: 0;
            font-weight: 500;
            color: #3A4558;
        }

        .troubleshooting-list {
            background-color: #F8F5FF;
            padding: 20px;
            border-radius: 12px;
            margin: 25px 0;
            border: 1px solid #C0E8D4;
        }

        .troubleshooting-list h4 {
            color: #3A4558;
            margin-top: 0;
            margin-bottom: 15px;
            font-size: 16px;
            font-weight: 600;
        }

        .troubleshooting-list ul {
            margin: 0;
            padding-left: 20px;
        }

        .troubleshooting-list li {
            color: #7C7C7C;
            margin-bottom: 8px;
        }

        .cta-section {
            text-align: center;
            margin: 30px 0;
        }

        .cta-button {
            display: inline-block;
            background-color: #079953;
            color: white;
            padding: 12px 24px;
            text-decoration: none;
            border-radius: 8px;
            font-weight: 600;
            transition: background-color 0.3s ease;
        }

        .cta-button:hover {
            background-color: #07a559;
        }

        .footer {
            font-size: 14px;
            color: #7C7C7C;
            text-align: center;
            border-top: 1px solid #C0E8D4;
            padding-top: 20px;
            margin-top: 30px;
        }

        .footer p {
            margin: 5px 0;
        }

        .social-links {
            margin: 15px 0;
        }

        .social-links a {
            color: #079953;
            text-decoration: none;
            margin: 0 10px;
        }

        @media (max-width: 600px) {
            .container {
                margin: 10px;
                padding: 15px;
                border-radius: 16px;
            }
            
            .header h1 {
                font-size: 24px;
            }
            
            .detail-label {
                width: 120px;
            }
        }
    </style>
</head>
<body>
<div class="container">
    <div class="header">
        <img src="https://app.nizami.ai/assets/icons/logo.svg" alt="Nizami" class="logo">
        <div class="error-icon">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path>
            </svg>
        </div>
        <h1>Payment Failed </h1>
    </div>
    
    <div class="content">
        <p>Dear {{ user.first_name }} {{ user.last_name }},</p>
        <p>We encountered an issue processing your payment. Don't worry - this happens sometimes and is usually easy to resolve.</p>
        
        <div class="payment-details">
            <h3>Payment Details</h3>
            <ul>
                <li>
                    <span class="detail-label">Amount:</span>
                    <span class="detail-value">${{ payment.amount }}</span>
                </li>
                <li>
                    <span class="detail-label">Payment Method:</span>
                    <span class="detail-value">{{ payment.payment_method }}</span>
                </li>
                <li>
                    <span class="detail-label">Transaction ID:</span>
                    <span class="detail-value">{{ payment.transaction_id }}</span>
                </li>
                <li>
                    <span class="detail-label">Date:</span>
                    <span class="detail-value">{{ payment.created_at|date:"F d, Y" }}</span>
                </li>
                <li>
                    <span class="detail-label">Status:</span>
                    <span class="detail-value">{{ payment.status|title }}</span>
                </li>
                <li>
                    <span class="detail-label">Error:</span>
                    <span class="detail-value">{{ payment.failure_reason|default:"Payment processing failed" }}</span>
                </li>
            </ul>
        </div>

        <div class="highlight-box">
            <p>To complete your subscription, please try the following steps to resolve the payment issue.</p>
        </div>

        <div class="troubleshooting-list">
            <h4>What you can do:</h4>
            <ul>
                <li>Check that your payment method has sufficient funds</li>
                <li>Verify your billing information is correct</li>
                <li>Try using a different payment method</li>
                <li>Contact your bank if the issue persists</li>
                <li>Ensure your card supports online purchases</li>
            </ul>
        </div>

        <div class="cta-section">
            <a href="https://app.nizami.ai/profile-settings?tab=plans" class="cta-button">Try Payment Again</a>
        </div>

        <p>You can retry your payment by logging into your account and going to the billing section. If you continue to experience issues, please contact our support team and we'll be happy to help.</p>
        <p>Thank you for your patience!</p>
        <p>Best regards,<br>The Nizami Team</p>
    </div>
    
    <div class="footer">
        <div class="social-links">
            <a href="https://nizami.ai">Visit Website</a>
            <a href="mailto:support@nizami.ai">Contact Support</a>
        </div>
        <p>&copy; {{ current_year }} Nizami. All rights reserved.</p>
        <p>Your trusted AI legal assistant</p>
    </div>
</div>
</body>
</html>
