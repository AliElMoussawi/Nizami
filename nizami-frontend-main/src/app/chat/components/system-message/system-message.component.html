<div
  class="
  leading-1.5 py-1
  rounded-xl flex flex-col gap-2
  group
"
>
  <div class="flex flex-row gap-4">
    <app-chat-system-profile></app-chat-system-profile>

    <div class="legal-content w-full text-sm font-normal flex items-start pt-2.5"
       [dir]="message().language === 'en' ? 'ltr' : 'rtl'"
    >
      @if (isLast() && isTyping()) {
        <ngx-typed-writer
          [strings]="[
        text
      ]"
          [isHTML]="true"
          [smartBackspace]="false"
          [backSpeed]="15"
          [typeSpeed]="10"
          [loop]="false"
          (completeLoop)="writingDone()"
          [showCursor]="showCursor()"
        ></ngx-typed-writer>
      } @else {
        <div [innerHTML]="text | safeHtml"></div>
      }
    </div>
  </div>

  @if (message().messageFiles && message().messageFiles!.length > 0) {
    <div class="flex flex-wrap gap-2 justify-start">

      @for (file of message().messageFiles; track file.id) {
        <app-user-message-file
          [file]="file"
          (click)="clicked(file)"
          [selectable]="true"
          [isUserMessage]="false"
        ></app-user-message-file>
      }

    </div>
  }

  <div class="flex flex-row gap-1 opacity-0 group-hover:opacity-100 transition-opacity duration-200">
    <app-copy-button
      [text]="message().text"
    ></app-copy-button>
  </div>

</div>
